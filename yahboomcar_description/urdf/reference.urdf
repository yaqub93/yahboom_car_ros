<?xml version="1.0"?>

<robot name="car" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <link name="base_link">
        <visual>
            <geometry>
                <box size="0.4 0.17 0.005"/>
            </geometry>
            <material name="gray">
                <color rgba="128 128 128 0.5"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="0.4 0.17 0.005"/>
            </geometry>
        </collision>
    </link>

    <link name="battery_link">
         <visual>
            <geometry>
                <box size="0.067 0.057 0.155"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <box size="0.067 0.057 0.155"/>
            </geometry>
        </collision>
    </link>

    <link name="topbase_link">
        <visual>
            <geometry>
                <box size="0.1085 0.057 0.005"/>
            </geometry>
            <material name="gray">
                <color rgba="128 128 128 0.5"/>
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="0.1085 0.057 0.005"/>
            </geometry>
        </collision>
    </link>


    <link name="front_right_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </collision>
    </link>
    <link name="front_left_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </collision>
    </link>
    <link name="rear_right_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </collision>
    </link>
    <link name="rear_left_wheel_link">
        <visual>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.0425" length="0.1"/>
            </geometry>
        </collision>
    </link>







    <joint name="front_right_wheel_joint" type="continuous">
        <parent link="base_link"/>
        <child link="front_right_wheel_link"/>
        <origin rpy="1.57 0 0" xyz="0.1575 0.1 -0.045"/>
        <axis xyz="0 0 1"/>
        <limit effort="100.0" velocity="10"/>
    </joint>
    <joint name="front_left_wheel_joint" type="continuous">
        <parent link="base_link"/>
        <child link="front_left_wheel_link"/>
        <origin rpy="1.57 0 0" xyz="0.1575 -0.1 -0.045"/>
        <axis xyz="0 0 1"/>
        <limit effort="100.0" velocity="10"/>
    </joint>
    <joint name="rear_right_wheel_joint" type="continuous">
        <parent link="base_link"/>
        <child link="rear_right_wheel_link"/>
        <origin rpy="1.57 0 0" xyz="-0.1575 0.1 -0.045"/>
        <axis xyz="0 0 1"/>
        <limit effort="100.0" velocity="10"/>
    </joint>
    <joint name="rear_left_wheel_joint" type="continuous">
        <parent link="base_link"/>
        <child link="rear_left_wheel_link"/>
        <origin rpy="1.57 0 0" xyz="-0.1575 -0.1 -0.045"/>
        <axis xyz="0 0 1"/>
        <limit effort="100.0" velocity="10"/>
    </joint>


    <joint name="battery_joint" type="fixed">
        <parent link="base_link"/>
        <child link="battery_link"/>
        <origin rpy="0 0 0" xyz="0 0 0.08"/>
    </joint>
    <joint name="topbase_joint" type="fixed">
        <parent link="battery_link"/>
        <child link="topbase_link"/>
        <origin rpy="0 0 0" xyz="0.02075 0 0.08"/>
    </joint>












    <link name="imu_base_link">
        <visual>
            <geometry>
                <box size="0.067 0.057 0.015"/>
            </geometry>
        </visual>
    </link>
    <joint name="imu_base_joint" type="fixed">
        <parent link="topbase_link"/>
        <child link="imu_base_link"/>
        <origin rpy="0 0 0" xyz="-0.02075 0 0.01"/>
    </joint>


    <link name="laser_base_link">
        <visual>
            <geometry>
                <box size="0.037 0.037 0.033"/>
            </geometry>
        </visual>
    </link>
    <joint name="laser_base_joint" type="fixed">
        <parent link="imu_base_link"/>
        <child link="laser_base_link"/>
        <origin rpy="0 0 0" xyz="0 0 0.024"/>
    </joint>



    <link name="laser_link">
        <visual>
            <geometry>
                <cylinder radius="0.0185" length="0.013"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.0185" length="0.013"/>
            </geometry>
        </collision>
    </link>
    <joint name="laser_joint" type="continuous">
        <parent link="laser_base_link"/>
        <child link="laser_link"/>
        <origin rpy="0 0 0" xyz="0 0 0.023"/>
        <axis xyz="0 0 1"/>
        <limit effort="100.0" velocity="10"/>
    </joint>

    <gazebo reference="laser_link">
        <sensor name="laser_sensor" type="ray">
            <always_on>true</always_on>
            <visualize>true</visualize>
            <update_rate>5</update_rate>
            <pose>0 0 0.075 0 0 0</pose>
            <ray>
                <scan>
                    <horizontal>
                    <samples>360</samples>
                    <resolution>1.000000</resolution>
                    <min_angle>0.000000</min_angle>
                    <max_angle>6.280000</max_angle>
                    </horizontal>
                </scan>
                <range>
                    <min>0.120000</min>
                    <max>3.5</max>
                    <resolution>0.015000</resolution>
                </range>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.01</stddev>
                </noise>
            </ray>

            <plugin name="laserscan" filename="libgazebo_ros_ray_sensor.so">
                <ros>
                    <remapping>~/out:=scan</remapping>
                </ros>
                <output_type>sensor_msgs/LaserScan</output_type>
                <frame_name>laser_link</frame_name>
            </plugin>
        </sensor>
    </gazebo>





    <link name="imu_link">
        <visual>
            <geometry>
                <cylinder radius="0.01" length="0.01"/>
            </geometry>
        </visual>
    </link>
    <joint name="imu_joint" type="fixed">
        <parent link="imu_base_link"/>
        <child link="imu_link"/>
        <origin rpy="0 0 0" xyz="0.0 0 0.0075"/>
    </joint>

    <gazebo reference="imu_link">
      <sensor name="imu_sensor" type="imu">
      <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
          <ros>
            <namespace>/</namespace>
            <remapping>~/out:=imu</remapping>
          </ros>
          <initial_orientation_as_reference>false</initial_orientation_as_reference>
        </plugin>
        <always_on>true</always_on>
        <update_rate>100</update_rate>
        <visualize>true</visualize>
        <imu>
          <angular_velocity>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </z>
          </angular_velocity>
          <linear_acceleration>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>1.7e-2</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </z>
          </linear_acceleration>
        </imu>
      </sensor>
    </gazebo>



    <link name="camera_one_link">
        <visual>
            <geometry>
                <box size="0.01 0.01 0.01"/>
            </geometry>
        </visual>
    </link>
    <joint name="camera_one_joint" type="fixed">
        <parent link="topbase_link"/>
        <child link="camera_one_link"/>
        <origin rpy="0 0 0" xyz="0.04925 0.005 0.01"/>
    </joint>

    <link name="camera_two_link">
        <visual>
            <geometry>
                <box size="0.01 0.01 0.01"/>
            </geometry>
        </visual>
    </link>
    <joint name="camera_two_joint" type="fixed">
        <parent link="topbase_link"/>
        <child link="camera_two_link"/>
        <origin rpy="0 0 0" xyz="0.04925 -0.005 0.01"/>
    </joint>


    <gazebo reference="camera_one_link">
        <sensor type="camera" name="camera">
            <update_rate>30.0</update_rate>
            <camera name="head">
                <horizontal_fov>1.3962634</horizontal_fov>
                <image>
                <width>1280</width>
                <height>720</height>
                <format>R8G8B8</format>
                </image>
                <clip>
                <near>0.02</near>
                <far>300</far>
                </clip>
                <noise>
                <type>gaussian</type>
                <mean>0.0</mean>
                <stddev>0.007</stddev>
                </noise>
            </camera>
            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <alwaysOn>true</alwaysOn>
                <updateRate>0.0</updateRate>
                <cameraName>/camera</cameraName>
                <imageTopicName>image_raw</imageTopicName>
                <cameraInfoTopicName>camera_info</cameraInfoTopicName>
                <frameName>camera_link</frameName>
                <hackBaseline>0.07</hackBaseline>
            </plugin>
        </sensor>
        <material>Gazebo/Blue</material>
    </gazebo>
    <gazebo reference="camera_two_link">
        <sensor type="camera" name="camera">
            <update_rate>30.0</update_rate>
            <camera name="head">
                <horizontal_fov>1.3962634</horizontal_fov>
                <image>
                <width>1280</width>
                <height>720</height>
                <format>R8G8B8</format>
                </image>
                <clip>
                <near>0.02</near>
                <far>300</far>
                </clip>
                <noise>
                <type>gaussian</type>
                <mean>0.0</mean>
                <stddev>0.007</stddev>
                </noise>
            </camera>
            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <alwaysOn>true</alwaysOn>
                <updateRate>0.0</updateRate>
                <cameraName>/camera</cameraName>
                <imageTopicName>image_raw</imageTopicName>
                <cameraInfoTopicName>camera_info</cameraInfoTopicName>
                <frameName>camera_link</frameName>
                <hackBaseline>0.07</hackBaseline>
            </plugin>
        </sensor>
        <material>Gazebo/Blue</material>
    </gazebo>







</robot>